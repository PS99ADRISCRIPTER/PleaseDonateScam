print("Loading Script")

local player = game.Players.LocalPlayer
local camera = workspace.CurrentCamera

-- üßπ GUI leeren + Gift BUTTON resetten
local function clearGiftGui()
	local playerGui = player:WaitForChild("PlayerGui")
	local mainGui = playerGui:WaitForChild("MainGUI")
	local giftGui = mainGui:WaitForChild("Gift")
	local frame = giftGui:WaitForChild("Frame")
	local giftButton = frame:WaitForChild("Gift") -- üéÅ BUTTON

	-- TextBoxen leeren
	local messageBox = frame:FindFirstChild("Message")
	local usernameBox = frame:FindFirstChild("Username")

	if messageBox and messageBox:IsA("TextBox") then
		messageBox.Text = ""
	end

	if usernameBox and usernameBox:IsA("TextBox") then
		usernameBox.Text = ""
	end

    giftGui.Position = UDim2.new(0.5, 0, 0.5, 0)
    giftGui.Size = UDim2.new(0, 450, 0, 350)

	-- üéÅ Gift BUTTON Position & Gr√∂√üe resetten
	giftButton.Position = UDim2.new(0, 0, 0, 0)
	giftButton.Size = UDim2.new(1, 0, 0, 38)
end

-- üßπ ZUERST GUI resetten
clearGiftGui()

-- üîÅ Spieler zur√ºcksetzen (Respawn)
if player.Character then
	local humanoid = player.Character:FindFirstChild("Humanoid")
	if humanoid then
		humanoid.Health = 0
	end
end

task.wait(1)

-- üì∑ Kamera & Zoom resetten
local function resetCamera()
	local character = player.Character or player.CharacterAdded:Wait()
	local humanoid = character:WaitForChild("Humanoid")

	camera.CameraType = Enum.CameraType.Custom
	camera.CameraSubject = humanoid

	player.CameraMinZoomDistance = 0.5
	player.CameraMaxZoomDistance = 500
	camera.FieldOfView = 70
end
-- ============================================
-- SCRIPT 2: 40px RESETTER (mit Enforcer-Stop)
-- ============================================

-- Funktion zum Stoppen des 250px Enforcers
local function stop250Enforcer()
    print("‚èπÔ∏è  Versuche 250px Enforcer zu stoppen...")
    
    local stopped = false
    
    -- Methode 1: √úber _G.Button250Enforcer
    if _G.Button250Enforcer then
        _G.Button250Enforcer.isActive = false
        print("‚úÖ _G.Button250Enforcer gestoppt")
        stopped = true
        
        -- L√∂sche Connections
        if _G.Button250Enforcer.connections then
            for _, connection in ipairs(_G.Button250Enforcer.connections) do
                pcall(function() connection:Disconnect() end)
            end
            print("‚úÖ Alle Connections getrennt")
        end
    end
    
    -- Methode 2: √úber globale Variablen
    local globalVars = {"run", "isActive", "ButtonSizeEnforcer"}
    for _, varName in ipairs(globalVars) do
        if _G[varName] ~= nil then
            if type(_G[varName]) == "table" and _G[varName].isActive ~= nil then
                _G[varName].isActive = false
                print("‚úÖ Tabelle '" .. varName .. "' gestoppt")
                stopped = true
            elseif type(_G[varName]) == "boolean" then
                _G[varName] = false
                print("‚úÖ Variable '" .. varName .. "' auf false")
                stopped = true
            end
        end
    end
    
    -- Methode 3: Direkte Variablen im aktuellen Environment
    pcall(function() isActive = false end)
    pcall(function() run = false end)
    
    if not stopped then
        print("‚ÑπÔ∏è")
    else
        print("‚úÖ")
    end
    
    return stopped
end

-- Warte kurz nach dem Stoppen
local function waitForStop()
    print("‚è≥")
    for i = 1, 5 do
        wait(0.1)
        write(".")
    end
    print("\n")
end

-- Funktion zum Zur√ºcksetzen auf 40px
local function resetTo40px()
    print("üîÑ")
    
    local overlay = game:GetService("CoreGui"):FindFirstChild("FoundationOverlay")
    if not overlay then
        print("‚ö†Ô∏è")
        return 0
    end
    
    local resetCount = 0
    local foundButtons = 0
    
    local function processButton(obj)
        if obj:IsA("ImageButton") then
            local textLabel = obj:FindFirstChild("Text")
            if textLabel and textLabel:IsA("TextLabel") then
                foundButtons = foundButtons + 1
                
                -- Pr√ºfe ob es ein Buy Button ist
                local textLower = string.lower(textLabel.Text)
                local isBuyButton = string.find(textLower, "buy") or 
                                   string.find(textLower, "kaufen") or
                                   string.find(textLower, "5000px")
                
                if isBuyButton then
                    -- Setze auf 40px H√∂he
                    local currentWidth = obj.AbsoluteSize.X
                    if currentWidth < 50 then currentWidth = 120 end
                    
                    obj.Size = UDim2.new(0, currentWidth, 0, 40)
                    
                    -- Text zur√ºcksetzen
                    textLabel.Text = "Buy"
                    textLabel.TextSize = 14
                    textLabel.TextColor3 = Color3.new(1, 1, 1)
                    
                    -- Farbe zur√ºcksetzen (Standard Roblox Button Farbe)
                    obj.BackgroundColor3 = Color3.new(0.223529, 0.223529, 0.223529)
                    obj.BackgroundTransparency = 0
                    
                    -- Glow Effekt entfernen
                    local glow = obj:FindFirstChild("5000pxGlow") or obj:FindFirstChild("SizeGlow")
                    if glow then
                        glow:Destroy()
                    end
                    
                    -- Ecken abrunden falls vorhanden
                    local corner = obj:FindFirstChild("CornerRadius")
                    if corner then
                        corner.CornerRadius = UDim.new(0, 8)
                    end
                    
                    resetCount = resetCount + 1
                    print("‚Ü™Ô∏è")
                end
            end
        end
        
        for _, child in ipairs(obj:GetChildren()) do
            processButton(child)
        end
    end
    
    processButton(overlay)
    
    if resetCount > 0 then
        print("‚úÖ")
    else
        print("‚ÑπÔ∏è")
    end
    
    return resetCount
end

-- Spezielle Funktion f√ºr ProductPurchaseModal Button
local function resetSpecificBuyButton()
    print("üéØ")
    
    local overlay = game:GetService("CoreGui"):FindFirstChild("FoundationOverlay")
    if not overlay then return 0 end
    
    local modal = overlay:FindFirstChild("ProductPurchaseModal")
    if not modal then
        print("‚ö†Ô∏è")
        return resetTo40px()  -- Fallback zu allgemeiner Suche
    end
    
    -- Versuche den genauen Pfad
    local sheetContainer = modal:FindFirstChild("SheetContainer")
    if not sheetContainer then return resetTo40px() end
    
    local sheet = sheetContainer:FindFirstChild("Sheet")
    if not sheet or not sheet:IsA("ImageButton") then return resetTo40px() end
    
    local content = sheet:FindFirstChild("Content")
    if not content then return resetTo40px() end
    
    local actions = content:FindFirstChild("Actions")
    if not actions then return resetTo40px() end
    
    local button1 = actions:FindFirstChild("1")
    if not button1 or not button1:IsA("ImageButton") then return resetTo40px() end
    
    local textLabel = button1:FindFirstChild("Text")
    if not textLabel then return resetTo40px() end
    
    -- Exakte Zur√ºcksetzung
    button1.Size = UDim2.new(0, 120, 0, 40)  -- Originalgr√∂√üe
    
    textLabel.Text = "Buy"
    textLabel.TextSize = 14
    textLabel.TextColor3 = Color3.new(1, 1, 1)
    
    button1.BackgroundColor3 = Color3.new(0.223529, 0.223529, 0.223529)
    button1.BackgroundTransparency = 0
    
    -- Effekte entfernen
    local glow = button1:FindFirstChild("5000pxGlow") or button1:FindFirstChild("SizeGlow")
    if glow then glow:Destroy() end
    
    print("‚úÖ")
    return 1
end

-- Hauptfunktion
local function mainReset()
    -- 1. Stoppe 5000px Enforcer
    stop250Enforcer()
    
    -- 2. Warte kurz
    waitForStop()
    
    -- 3. Zur√ºcksetzen auf 40px
    local result = resetSpecificBuyButton()
    
    if result == 0 then
        print("‚ÑπÔ∏è")
        result = resetTo40px()
    end
    
    -- 4. Finale Meldung

    if result > 0 then
        print("‚úÖ")
    else
        print("‚ÑπÔ∏è")
    end
    
    print("1")
    
    return result
end

-- Starte automatisch
wait(0.5)
mainReset()

-- Einzeiler zum sp√§teren Ausf√ºhren:
-- mainReset()
